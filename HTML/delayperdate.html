<!DOCTYPE html>
<html lang="en">
<head>
  <link href="/css-addins/bootstrap.css" rel="stylesheet">
  <link href="/css-addins/sheet.css" rel="stylesheet">
  <script src="/js-addins/plotly-latest.min.js"></script>
  <script src="/js-addins/jquery-3.2.1.slim.min.js"></script>
  <script src="/js-addins/popper.min.js"></script>
  <script src="/js-addins/bootstrap.min.js"></script>
</head>

<body>

 <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
  <a class="navbar-brand" href="index.html" id="title" style="
  margin-left: 420px;
  ">Delays in American Domestic Airlines by Rhys Menezes</a>
</nav>

<div class="container-fluid">
 <div class="row">
  <div class="col-2">
   <div class="row">
     <nav class="col-sm-3 col-md-2 d-none d-sm-block bg-light sidebar">
       <ul class="nav nav-pills flex-column">
         <li class="nav-item">
           <a class="nav-link" href="delayforairlines.html">Average Delay Per Airline</a>
         </li>
         <li class="nav-item">
           <a class="nav-link" href="delayperairline.html">Delay Per Month</a>
         </li>
         <li class="nav-item">
           <a class="nav-link active" href="delayperdate.html">Delay Per Date</a>
         </li>
          <li class="nav-item">
          <a class="nav-link" href="delayfreq.html">Delay Frequency</a>
          </li>
         <li class="nav-item">
           <a class="nav-link" href="delayperairport.html">Delay Per Airport</a>
         </li>
         <li class="nav-item">
           <a class="nav-link" href="delayperstate.html">Delay Per State</a>
         </li>
       </ul>
     </nav>
   </div>
 </div>
 <div class="col-9">
   <div class="row" style="margin-top: 50px;">
    <div class = "col">
     <select id="select" onchange="thefunction()" style="
     margin-top: 25px;
     margin-left: 50px;">
     <option value="Date">Date</option>
     <option value="Day">Day</option>
   </select>
 </div>
     <div class = "col">
     <button id="button" onclick="tallyfunction()" style="
     margin-top: 25px;
     margin-left: 50px;">Number of Delays</button>
      <button id="button" onclick="avgfunction()">Average Delay</button>
 </div>
</div>
<div class="row">
 <div class="col">
  <div id="tester">
  </div>
  <div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="delaydate.js"></script>
<script type="text/javascript">

  function movename(){
    var title=document.getElementsByClassName("g-xtitle");
    
    title[0].innerHTML="<text class=\"xtitle\" x=\"497.5\" y=\"406.5\" text-anchor=\"middle\" data-unformatted=\"Days\" data-math=\"N\" style=\"font-family: &quot;Open Sans&quot;, verdana, arial, sans-serif; font-size: 14px; fill: rgb(68, 68, 68); opacity: 1; font-weight: normal; white-space: pre;\">Days</text>";
    title[0].outerHTML="<g class=\"g-xtitle\"><text class=\"xtitle\" x=\"497.5\" y=\"406.5\" text-anchor=\"middle\" data-unformatted=\"Days\" data-math=\"N\" style=\"font-family: &quot;Open Sans&quot;, verdana, arial, sans-serif; font-size: 14px; fill: rgb(68, 68, 68); opacity: 1; font-weight: normal; white-space: pre;\">Days</text></g>";
  }

  function unpack(rows, key) {
    return rows.map(function(row){
      return row[key]; 
    });
  }

  function pickairline(day,num){
    if (num==1){
      day=day+"avg";
    }

    Plotly.d3.csv(day+".csv", function(err, rows){

      var varcontainer={
        type:'lines',
        x:unpack(rows,'day'),
        y:unpack(rows,'value'),
        line:{color:'#17BECF'},
        name:'Delays in 2008',
      }

      var df=[varcontainer];

      hi=document.getElementById("select").value;

      if (hi=="Date"){
        var specs={
          title:'Average Delay of Airlines Per '+hi,
          showlegend: true,
          legend:{"orientation": "v"},
          xaxis:{
            title:'Days',
          range:['2008-01-1','2008-12-31'],
          rangeselector:{buttons:[{
            count:1,
            label:'1 Month',
            step:'month',
            stepmode:'backward'
          },{
            count:4,
            label:'4 Months',
            step:'month',
            stepmode:'backward'
          },{
            count:6,
            label:'6 Months',
            step:'month',
            stepmode:'backward'
          },{
            step:'all'
          }
          ]},
          rangeslider:{range:['2008-01-1', '2008-12-31']},
          type:'date'
          },

          yaxis:{
            title:'Average Delay in mins',
          }
        };
      }else{
        var specs={
          title:'Average Delay of Airlines Per '+hi,
          showlegend: true,
          legend:{"orientation": "v"},
          xaxis:{
            title:'Days'
          },
          yaxis:{
            title:'Average Delay in mins',
          }
        };
      }

      Plotly.newPlot('tester',df,specs);
      movename();

    });
  }

  function thefunction(){

    var selected = document.getElementById("select").value;

    if (selected=="Day"){
      pickairline("daydelay",0);

    }else if (selected=="Date"){
      pickairline("datedelay",0);
    }

 }

 function tallyfunction(){

  var selected = document.getElementById("select").value;
  if (selected=="Day"){
    pickairline("daydelay",2);

  }else if (selected=="Date"){
    pickairline("datedelay",2);
  }
 }

 function avgfunction(){

  var selected = document.getElementById("select").value;

  if (selected=="Day"){
    pickairline("daydelay",1);

  }else if (selected=="Date"){
    pickairline("datedelay",1);
  }
 }

</script>
</body>
</html>